kind: pipeline
type: docker
name: default


steps:
  - name: pytest
    image: databricksdocs/pytest:v0.1.5
    commands:
    - pip install -r requirements.txt
    - pytest

  - name: gitleaks
    image: zricethezav/gitleaks:latest
    commands:
    - gitleaks detect -v --exit-code 0

  - name: pylint
    image: wpengine/pylint:latest
    commands:
    - pip install -r requirements.txt
    - pylint flaskr --errors-only

  - name: sonarqube
    image: aosapps/drone-sonar-plugin
    settings:
        sonar_host:
          from_secret: sonar_host
        sonar_token:
          from_secret: sonar_token





